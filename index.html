<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8>
	<title>Mesh 2D</title>
</head>
<body>
	<script type="text/javascript" src="lib/three.min.js"></script>
	<script type="text/javascript" src="lib/OrbitControls.js"></script>
	<script type="text/javascript" src="ImageGeometry.js"></script>
	<script type="text/javascript">
		var scene = new THREE.Scene();
		scene.background = new THREE.Color(0.4, 0.4, 0.4);

		var camera = new THREE.PerspectiveCamera(75, 1, 0.001, 1000);
		camera.position.z = 3;

		var canvas = document.createElement("canvas");
		canvas.style.position = "absolute";
		canvas.style.top = "0px";
		canvas.style.left = "0px";
		document.body.appendChild(canvas);

		var renderer = new THREE.WebGLRenderer({canvas:canvas, antialias:true});

		var wireframe = new THREE.MeshBasicMaterial({wireframe:true, transparent:true, opacity:0.5, color:0xFFFF00});

		var controls = new THREE.OrbitControls(camera, canvas);

		document.body.onresize = function()
		{
			var width = window.innerWidth;
			var height = window.innerHeight;
			renderer.setSize(width, height);
			camera.aspect = width / height;
			camera.updateProjectionMatrix();
		}
		document.body.onresize();

		function animate()
		{
			requestAnimationFrame(animate);
			controls.update();
			renderer.render(scene, camera);
		}
		animate();

		var source = "data/grass.png";
		var geometry = new ImageGeometry();
		
		geometry.load(source, function(geometry)
		{
			//THREE.ShaderLib.basic
			var texture = new THREE.TextureLoader().load(source);
			var material = new THREE.MeshBasicMaterial({side: THREE.DoubleSide, map: texture});
			
			scene.add(new THREE.Mesh(geometry, material));
			scene.add(new THREE.Mesh(geometry, wireframe));
		});


	</script>
</body>
</html>
